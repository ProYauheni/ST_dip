{% extends 'base.html' %}

{% block content %}
<style>
.contact-info {
  font-size: 1.2rem;
}

.large-font p {
  font-size: 1.1rem !important;
  text-align: center !important;
  margin-left: auto !important;
  margin-right: auto !important;
  max-width: 100%;
}

.centered-row {
  display: flex;
  justify-content: center;
  gap: 3rem;
  flex-wrap: wrap;
}

.col-custom {
  flex: 0 0 45%;
  min-width: 300px;
}

.text-start {
  text-align: left !important;
}
</style>

<div class="container text-center">
  <h2 class="mb-4">Контакты СТ «{{ community.name }}»</h2>

  <div class="centered-row mx-auto">
    <!-- Левая колонка: Контакты -->
    <div class="col-custom text-start">
      <h4 class="text-center">Председатель правления:</h4>
      {% if contacts.chairman %}
        {% if contacts.chairman.full_name or contacts.chairman.plot_number or contacts.chairman.phone %}
          <p class="text-center">
            {% if contacts.chairman.full_name %}
              <span class="contact-info">{{ contacts.chairman.full_name }}</span>
            {% endif %}
            {% if contacts.chairman.plot_number %}
              , <span class="contact-info">участок №{{ contacts.chairman.plot_number }}</span>
            {% endif %}
            {% if contacts.chairman.phone %}
              , <span class="contact-info">☎{{ contacts.chairman.phone }}</span>
            {% endif %}
          </p>
        {% else %}
          <p>Информация отсутствует.</p>
        {% endif %}
      {% else %}
        <p>Информация отсутствует.</p>
      {% endif %}

      <h4 class="text-center">Казначей:</h4>
      {% if contacts.treasurer %}
        {% if contacts.treasurer.full_name or contacts.treasurer.plot_number or contacts.treasurer.phone %}
          <p class="text-center">
            {% if contacts.treasurer.full_name %}
              <span class="contact-info">{{ contacts.treasurer.full_name }}</span>
            {% endif %}
            {% if contacts.treasurer.plot_number %}
              , <span class="contact-info">участок №{{ contacts.treasurer.plot_number }}</span>
            {% endif %}
            {% if contacts.treasurer.phone %}
              , <span class="contact-info">☎{{ contacts.treasurer.phone }}</span>
            {% endif %}
          </p>
        {% else %}
          <p>Информация отсутствует.</p>
        {% endif %}
      {% else %}
        <p>Информация отсутствует.</p>
      {% endif %}

      <h4 class="text-center">Члены правления:</h4>
      {% if contacts.board_members %}
        <ul class="list-unstyled">
          {% for member in contacts.board_members %}
            {% if member.full_name or member.plot_number or member.phone %}
              <li class="text-center">
                {% if member.full_name %}
                  <span class="contact-info">{{ member.full_name }}</span>
                {% endif %}
                {% if member.plot_number %}
                  , <span class="contact-info">участок №{{ member.plot_number }}</span>
                {% endif %}
                {% if member.phone %}
                  , <span class="contact-info">☎{{ member.phone }}</span>
                {% endif %}
              </li>
            {% endif %}
          {% endfor %}
        </ul>
      {% else %}
        <p>Информация отсутствует.</p>
      {% endif %}

      <h4 class="text-center">Ответственный за электрохозяйство:</h4>
      {% if contacts.electricity_manager %}
        {% if contacts.electricity_manager.full_name or contacts.electricity_manager.plot_number or contacts.electricity_manager.phone %}
          <p class="text-center">
            {% if contacts.electricity_manager.full_name %}
              <span class="contact-info">{{ contacts.electricity_manager.full_name }}</span>
            {% endif %}
            {% if contacts.electricity_manager.plot_number %}
              , <span class="contact-info">участок №{{ contacts.electricity_manager.plot_number }}</span>
            {% endif %}
            {% if contacts.electricity_manager.phone %}
              , <span class="contact-info">☎{{ contacts.electricity_manager.phone }}</span>
            {% endif %}
          </p>
        {% else %}
          <p>Информация отсутствует.</p>
        {% endif %}
      {% else %}
        <p>Информация отсутствует.</p>
      {% endif %}

      <h4 class="text-center">Ответственный за водохозяйство:</h4>
      {% if contacts.water_manager %}
        {% if contacts.water_manager.full_name or contacts.water_manager.plot_number or contacts.water_manager.phone %}
          <p class="text-center">
            {% if contacts.water_manager.full_name %}
              <span class="contact-info">{{ contacts.water_manager.full_name }}</span>
            {% endif %}
            {% if contacts.water_manager.plot_number %}
              , <span class="contact-info">участок №{{ contacts.water_manager.plot_number }}</span>
            {% endif %}
            {% if contacts.water_manager.phone %}
              , <span class="contact-info">☎{{ contacts.water_manager.phone }}</span>
            {% endif %}
          </p>
        {% else %}
          <p>Информация отсутствует.</p>
        {% endif %}
      {% else %}
        <p>Информация отсутствует.</p>
      {% endif %}
    </div>

    <!-- Правая колонка: Адреса и дополнительная информация -->
    <div class="col-custom text-start large-font">
      <h4 class="text-center">Юридический адрес:</h4>
      {% if community.legal_address %}
        <p >{{ community.legal_address|linebreaks }}</p>
      {% else %}
        <p>Информация отсутствует.</p>
      {% endif %}

      <h4 class="text-center">Почтовый адрес:</h4>
      {% if community.postal_address %}
        <p>{{ community.postal_address|linebreaks }}</p>
      {% else %}
        <p>Информация отсутствует.</p>
      {% endif %}

      <h4 class="text-center">Банковские реквизиты:</h4>
      {% if community.bank_details %}
        <p>{{ community.bank_details|linebreaks }}</p>
      {% else %}
        <p>Информация отсутствует.</p>
      {% endif %}


      <h4 class="text-center">Дополнительная информация:</h4>
      {% if community.additional_info %}
        <p>{{ community.additional_info|linebreaks }}</p>
      {% endif %}

      {% if community.messenger_group_link %}
        <p class="text-center">
          <a href="{{ community.messenger_group_link }}" target="_blank" rel="noopener noreferrer"
             style="
               color: #665cac;
               font-weight: bold;
               text-decoration: underline;
               font-size: 1.2rem;
               line-height: 1.5;
               transition: color 0.3s ease, text-decoration 0.3s ease;
             "
             onmouseover="this.style.color='#4b3d82'; this.style.textDecoration='none';"
             onmouseout="this.style.color='#665cac'; this.style.textDecoration='underline';"
          >
            Присоединиться к группе в мессенджере Viber
          </a>

      {% endif %}


      {% if user.profile.role == 'chairman' %}
        <p class="mb-4">
          <a href="{% url 'community_contacts_edit_all' %}" class="btn btn-warning mb-3">Редактировать все контактные данные</a>
        </p>
      {% elif user.profile.role == 'board_member' %}
        <p class="mb-4">
          <a href="{% url 'community_contact_edit' %}" class="btn btn-warning mb-3">Редактировать контактную информацию</a>
        </p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
